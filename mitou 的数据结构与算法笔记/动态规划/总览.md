# 总览

分类可能不全，不同分类可能有交叠，分类之内的分类也是如此，所以分类只做参考，难度也不是线性递增的。

对同一个问题，可能构造不同的规划解决。

## 贪心算法

（动规特例）

一般先考虑贪心是否可行，再考虑动规。

## 背包问题

### 综述

- 背包问题放物品就是“选或不选”，“放不放得下”的问题，其物品间只存在“放与不放”的关系，若存在其它关系，比如顺序等，可能有更快的解法。
- 背包问题的“容量”决定了“个数”和“放不放得下”，若容量没有显式给出，可以个数代替。“容量”被其它意义代替时，可能要多次回溯以决定放不放得下。
- 背包问题的状态转移是从“上一行”转到“下一行”，可根据实际情况对某些操作跨越行，这时就对滚动数组有限制。
- 如果越行的操作无法完成，可能需要增加循环，或者改变算法。
- 扩展时滚动数组可能失效，要重新安排数组维数。

### 分类

- 01 背包
	每种物品最多使用一次
- 完全背包
	每种物品可无限使用
- 多重背包
	每种物品有个数限制
- 混合背包
	将 01、完全、多重背包的数量限制混合
- 二维背包
	二维的物品限制（可扩展至多维（费用）背包）
- 分组背包
	每组物品最多选一个
- 有依赖的背包
	选附件必须选主件且一个附件只有一个主件（属于一种树形 dp）
### 重要引申
- 初始化细节
	恰好装满，不必装满问题
- 求具体解
	到底装了哪些物品，分别有几个
- 求方案数
	总方案数，最优方案数
- 读入优化
	一边读入一边处理

### 泛化

就是背包问题的外延问题，适当扩展即可。

- 负权背包
- 扩容背包

### 补充

- 01 背包，完全背包，多重背包都是分组背包的特例。
	- 01 背包：每种物品只有一组
	- 完全背包：每种物品有无限组
	- 多重背包：每种物品有限组
- 因为分组背包更宽泛，所以只有暴力解。

注意：求最小价值只需修改初始化，同时把 max 改为 min 即可……

噩梦问题：多背包问题（没事别妄想这个，这里只是写出来而已……）

## 线性动规

### 综述

线性动规就是阶段分布（注意是“阶段”，不是“状态”）成线形的动规（这条线可能宽度不固定，可以是线，也可以是一层一层的）。

### 分类

线性动规一般情况下大部分都是以时间等作为阶段划分的依据，较灵活多变。

- 单序列动规
	在单一序列上求最优解的问题（LIS）
- 双序列动规
	在双序列上求最优解的问题（LCS, LCIS）
- 多线程动规
	也叫多进程动规。针对局部最优解的合并不是全局最优解的情况，此时需要多路动规同时进行状态转移。一般多维动规为其暴力解，要将其优化。
	- 双路线程：方格取数
	- k 路线程：P2045 方格取数加强版（见图论网络流）？？？？？？？？


### 补充

几维动规：动规的循环层数，一种代码形式的称呼。

最长下降子序列的数量 == 最长上升子序列的长度：导弹拦截

## 区间动规

### 综述

- 区间动规就是以区间标志某种性质的动规。
- 达到最优解过程中，存在一些必定连续出现的状态，找到它。
- 一般来说，能够用区间表示法表示（中序）且具有连续区间性质的树形动规就是区间动规。
- 区间动规的元素相对位置是不变的。
- 分析时注意规模增大时的相邻过程（从初始规模开始，1、2、3、4……），这个相邻过程也可不相邻，也可以是 1、3、5；1、2、4、6；等。
- 要注意划分、合并、扩张、收缩等操作（注意其意义）能否进行，若不能，则不是区间动规。

### 分类

- 划分型
	对一段区间进行划分。？？？？？？
- 合并型 P1040 加分二叉树
	对许多小区间进行树结构的合并。
- 扩张型
	区间从小到大扩张。
	- 单点扩张（“放射”）：P1220 关路灯
	- 多点扩张（从多点扩张）：P3205 合唱队
- 收缩型
	区间从大到小收缩
	- 单点收缩（收缩到确定的一点或无点）：？？？？？
	- 多点收缩（收缩到可能的多点或无点）：P1005 矩阵取数

### 重要扩展

- 环形动规 P1880 石子合并
	区间呈环形的区间动规。一般可将环表示成两段拼接成的 $2N-1$ 长度的线。然后在所有长度为 N 的区间中再找一遍最值。有些“环形”是隐式给出的。
	
- 区域动规
	区域动规是区间动规的集合形式（超一维形式），是区间动规的超集。

### 补充

多点收缩最终答案仍可能只是收缩到一点，但这一点未在计算时是不定的。

合并型中，直接转移的不一定比多次分割比较后转移的更优：CF607B Zuma

依据意义不同，可能最终还需要一趟扫描。

区间动规根据形式可转化为树形动规。

## 树形动规

### 综述

- 树形动规就是阶段分布成树形的动规。
- 常用于将暴力搜索转化为“描述关系的矩阵”，使得每个关系只枚举一次，从而提升效率。（循环枚举中常产生无效点，需跳过）
- 可由搜索算法推出递推式，然后用动规实现。
- 也常表现为搜索算法嵌套转移方程的形式。
- 树形动规求“最值路径”以及“路径数”时，可记录前驱输出具体“路径”
- 树型动规使用 DFS 或 BFS 等手段控制阶段的顺序，从而通过回溯在其中进行状态转移。
- 树形动规已经非常接近图论了，与图论有许多共通概念，很多问题也完全可以用图论解决。
- 有时要添加虚结点，此时也会跟着引入虚边。
- 区分

	- 有向树

	- DAG

	- 有向图


有向树和 DAG 都是可以“摆弄”为树形的。

![img](images/总览/clipboard.png)

### 分类（面对的情况）

树形 dp 的分类是非常交叠不清晰的，DAG 是一个最万能最基本的形式。

- 树（Tree）（有向树，无向树）

  - 选择型

    - 多叉树：P1352 没有上司的舞会

      表示出选择的状态，选或不选。

  - 分配型

    - 二叉树：P2015 二叉苹果树

      可对左右子树分配容量。

    - 多叉树：有依赖的背包

      因为是多叉，所以不便于对各子树分配容量，故使用组合背包的思想。

- 有向无环图（DAG）

	- 有依赖的背包：P2014 选课


树与 DAG 存在拓扑序，这对于树形动规是非常重要的，其可以保证动规的阶段性与无后效性，即 树 和 DAG 可以保证在运行到当前状态时，其所需的以前的状态都是已被求出的。

### 记忆化搜索与树形动规

许多人把记忆化搜索混淆成树形动规，这是不严谨的，但无伤大雅。
- 若有决策过程，即是树形动规。
- 树形动规的过程中经常需要记忆化，以加速。

## 其它动规

### 状压压缩

状态压缩即用二进制表示状态，也可扩展为其它进制，常要结合位运算。

- 填充问题（最简边缘） AcWing 291 蒙德里安的梦想 AcWing 4406 积木画

### 数位计数

数位计数 + 动态规划？？？


## 小技巧

- 记录前驱
	每个阶段的状态转移记录不会被刷新时，可用记录前驱的数组递归输出路径。
	
- 转移方向表
	每个阶段的状态转移记录会被刷新时，可用记录状态转移方向的表，回溯输出路径。（相当于记录前驱的二维形式）
	
- 引用变量

  使用引用变量引用重复出现的多维数组值，便于后续多次使用。

## 优化方法一览

- 滚动数组
- 优先队列
- 二进制组合
- 状态压缩
- 四边形不等式优化？？？
