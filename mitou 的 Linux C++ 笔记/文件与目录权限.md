# 文件与目录权限

## 一般权限

### 概念

- 文件（rwx）（read，write，execute）
	- 所有者（owner）
	- 用户组（group）
	- 其他人（others）
	
- 目录（rwx）
	- 所有者
	- 用户组
	- 其他人
	
- 权限数字

  权限数字在编程处理时看做**八进制**。

### 命令

root 使用。

- chown

	修改拥有者，用户组。（以 `:` 分隔）

- chgrp

	修改用户组。

- chmod

	修改权限。

	- 数字方式修改
	- 符号方式修改

## 默认权限

新增一个文件或目录时的默认权限。

### 概念

- 对于文件

	文件没有 x 执行权限，故最大为 rw-rw-rw-（666 ）。

- 对于目录

	最大为 777 。

- 与 umask 值相减时，文件用 666 - umask 值，目录用 777 - umask 值。

### 命令

- umask

	显示默认权限。

	- `umask`

		以数字形式显示被拿掉的权限的权值（4、2、1 的组合值），显示四位数字，第一位数字表示隐藏权限，后三位表示一般权限。

	- `umask -S`

		以符号形式显示一般权限。

	- `umask <三位数字>`

		设置拿掉的一般权限。如：`umask 002`

## 文件隐藏属性

### 概念

使文件：

- 只能增加数据，不能删除也不能修改 `+a`
- 无法被修改 `+i`

### 命令

root 使用。

- lsattr

	显示文件隐藏属性。

- chattr

	配置文件隐藏属性。常用 `+i +a` 。

## 文件特殊权限

### 符号

- SUID ：所有者 x 位上的 s ，针对二进制文件

- SGID ：用户组 x 位上的 s ，针对二进制文件及目录

- SBIT ：其他人 x 位上的 t ，针对目录

- 注意

	s、s、t 显示为大写时，代表该权限是空的，可能是用户没有执行该文件的一般权限，导致特殊权限不起作用。

### 概念

- SUID（Set UID）
  只要用户能够使用具有本权限的程序，则在执行程序后，能以该文件拥有者的权限保持程序运行。
- SGID（Set GID）
	- 对二进制文件
		只要用户能够使用具有本权限的程序，则在执行程序后，能以该文件用户组的权限保持程序运行。
	- 对目录
		若用户具有本目录的 w 权限，则其建立的文件自动属于本目录的用户组
- SBIT（Sticky Bit）
	若用户对本目录具有写入权限，则在本目录下只可以删除，更名及移动自身创建的文件，root 可任意。

### 命令

- chmod

	SUID 为 4，SGID 为 2，SBIT 为 1 。

	- `chmod <四位数字> <filename>`

		第一位表示特殊权限，后三位表示一般权限。
