# 虚拟机

推荐使用 VirtualBox 。

## 网络模式

- 桥接模式（一般选桥接）

  虚拟机直接连接到物理网络，获得与主机相同网段的 IP 地址，

  - 相当于一台真实的电脑，可以直接与局域网内所有设备（包括真实机），以及外部网络设备通信。
  - 虚拟机多时可能会出现 IP 地址冲突。
  - 桥接模式下虚拟机的 ip 地址容易发生变动，影响配置与调试，可以设置静态 ip，使其固定。[参考](https://www.cnblogs.com/youzhibing/p/16853668.html)
  - 静态 ip 需要与宿主机保持网段一致，当宿主机的网络经常发生变化时，应当使用 NAT 模式，或保持宿主机网络稳定。
  - 如果设置宿主机 ip 为静态 ip ，那么宿主机网络变换后，不一定可用。

- NAT 模式

  虚拟机使用内部 IP 地址。

  - 虚拟机通过主机的网络连接访问外部网络，但外部网络无法直接访问虚拟机。
  - 需要配置 NAT 地址映射规则（转发到虚拟机内部地址）
  	- 地址的 IP 和 port 都是可以配置映射的。
  	- 源点 IP 可以是真实机 IP（`localhost`, `127.0.0.1`），也可以是任意一个 IP（甚至可以是任意网段）。
  	- 如果配置为任意 IP，那么这个任意 IP 可以作为虚拟机的外部 IP 使用（只要配置了映射）。
  	- 如果将每条映射规则的任意 IP 都设置为相同的 IP，则可以实现类似桥接模式静态 IP 的作用，且不受宿主机网络变动影响。

- 仅主机模式（host only）

  虚拟机有一个自己的 IP 地址。

  - 虚拟机只能与主机以及同样在 Host-Only 网络内的其他虚拟机通信，无法访问外部网络。

注意检查连通性：

- 检查与宿主机连通性（局域网） `ping <宿主机ip>`
- 检查与外网连通性（互联网） `ping www.baidu.com`
