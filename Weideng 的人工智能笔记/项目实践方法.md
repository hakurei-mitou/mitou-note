# 项目实践方法

## 建议

在 Docker 中使用 pip 。

未说明的的包优先安装最新版。

参考官网时注意选择对应版本的文档。

多个版本的包可以多次卸载，都卸载后，再安装新的。

解决版本依赖可找发布日期相近的依赖版本，特别是无共同交叉版本的依赖时。

可执行手动下载某些依赖。

## 基本概念

- pip

	python 包官方管理器。

- Anaconda（简称 conda）

	第三方虚拟包环境管理器。

- Docker

	虚拟操作系统环境。

---

- CUDA（Compute Unified Device Architecture）

	一个 GPU 并行编程计算框架。

	- CUDA 程序分为：

		- 运行在 cpu 上的 host 代码
		- 运行在 gpu 上的 device 代码。

	- CDUA API 分为：

		这两种 API 都有对应的 CUDA 版本。

		- runtime API

			更高级的封装，使用更方便。

		- driver API

			更接近底层，速度会更快。

- CUDA Toolkit

	包含 CUDA 相关的运行及开发组件，以下列出部分。

	- Compiler

	- GPU Driver

		- 每个版本的 CUDA Toolkit 对应一个最低版本的 CUDA Driver ，一般默认即可。
		- CUDA Driver 是错误的说法。
		- 这里指 CUDA 对 GPU 的驱动，而非系统对 GPU 的一般图形驱动。

	- cuDNN

		针对深度神经网络（DNN）的软件库。

	- nvcc

		cuda 的编译器，其命令显示 runtime API 对应的 CUDA 版本，是一般软件所需要的。

	- nvidia-smi（NVIDIA System Management Interface）

		NVIDIA GPU 的命令行管理工具，其命令显示 driver API 对应的 CUDA 版本。

一般 driver API 的 CUDA 版本 >= runtime API 的 CUDA 版本就行，即 CUDA version : nvidia-smi >= nvcc 。

nvidia 官方提供的 CUDA Toolkit 包含了完整的工具包，pytorch 提供的 Toolkit 只提供应用使用的库，不包含驱动程序等 CUDA 开发工具。

## 环境准备

### 环境查看

```shell
# 查看操作系统版本
lsb_release -a

# 查看 python 版本
python --version

# conda 环境管理命令
conda-env

# 查看 GPU 信息（查看系统的，非虚拟环境的）
nvidia-smi

# 查看 nvcc 相关信息（查看系统的，非虚拟环境的）
nvcc -V

# 查看 troch 和 cuda 版本
python -c 'import torch; print(torch.__version__); print(torch.version.cuda)'

# GPU 是否可用
python -c 'import torch; print(torch.cuda.is_available())'
```

### pip

```shell
pip list
pip show
pip install <package_name>[==version]
pip uninstall <package_name>[==version]
```

### python

更换 python 版本：

```shell



```

基于 Conda 设置 python 版本：

```shell
# 在 Colab 上安装 conda
!pip install -q condacolab
import condacolab
condacolab.install()

# 建立环境，激活环境。
!conda init   # 未使用过 conda 需要 init
!conda create -n env-name python=3.7 -y   # -y 即 -yes
!conda activate env-name
```

### torch cuda

注意 pytorch 和 cuda 的版本要对应，常一起安装，应该选择与 nvcc 版本对应的 cuda 版本（对应的 pytorch），命令可到 pytorch 官网查看。

### GCC

需要编译 CUDA 的程序需要有其 CUDA 需要的 GCC 版本。

系统会自带一个版本，一般都是兼容的。

安装：

```shell
apt install gcc-10 g++-10

# 如果上述命中找不到包，则：
add-apt-repository ppa:ubuntu-toolchain-r/test # 替用：apt install software-properties-common
apt update
apt install gcc-10 g++-10
```

更换 GCC 和 G++ 版本：

```shell
# 删除软链接
rm /usr/bin/gcc

# 建立新的软链接
ln -s /usr/bin/gcc-10 /usr/bin/gcc


rm /usr/bin/g++
ln -s /usr/bin/g++-10 /usr/bin/g++

# 检查
gcc -v
g++ -v
```

## 项目实践笔记方法

- 非系统整理

	每个项目单独记录即可，不要什么都想系统整理，不同库都不一样，要抓灵魂。

	- 遇到不懂的库函数，库类，在当前笔记简单记下作用即可。
	- 重要模块才需要详细笔记。
	- 笔记不要求以后直接能跑，比较只是笔记，不是长期项目。
	
- 笔记分类

  - 实践笔记

    某个具体的学习点。

  - 项目记录

    自己的一个完整项目。


注意跑测试文件，测试文件相当于一个含少量数据的完整 demo 。
