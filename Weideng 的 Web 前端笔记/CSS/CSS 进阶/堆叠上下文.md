# 堆叠上下文

（stack context）

一块区域，由某个元素创建，它规定了该区域的内容在 Z 轴上排列的先后顺序。

“画家算法”

## 创建堆叠上下文的元素

1. html 元素（根元素）
2. 设置了 z-index 属性数值（非 auto）的定位元素。

## 排列规则

同一个堆叠上下文中的元素在 Z 轴上的排列，从后到前（离用户从远到近）的顺序：
1. 创建堆叠上下文的元素的背景和边框。
2. 堆叠级别（z-index， stack level）为负值的堆叠上下文。
3. 常规流非定位的块盒。
4. 非定位的浮动盒子。
5. 常规流非定位行盒。
6. 任何 z-index 为 auto 的定位子元素，以及 z-index 为 0 的堆叠上下文。
7. 堆叠级别为正值的堆叠上下文。

注意：
- 各堆叠上下文间相互独立，不能穿插。
- 同类兄弟元素间，若堆叠级别相同，则源代码靠后的在前。
- p 元素内会生成匿名行盒，用于“装”文字。
- span 元素直接就是行盒，直接“装”文字。